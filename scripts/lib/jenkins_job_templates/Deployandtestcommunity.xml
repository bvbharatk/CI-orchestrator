<?xml version='1.0' encoding='UTF-8'?>
<project>
  <actions/>
    <description></description>
      <logRotator class="hudson.tasks.LogRotator">
          <daysToKeep>-1</daysToKeep>
              <numToKeep>30</numToKeep>
                  <artifactDaysToKeep>-1</artifactDaysToKeep>
                      <artifactNumToKeep>-1</artifactNumToKeep>
                        </logRotator>
                          <keepDependencies>false</keepDependencies>
                            <properties>
                                <hudson.model.ParametersDefinitionProperty>
                                      <parameterDefinitions>
                                              <hudson.model.StringParameterDefinition>
                                                        <name>git_repo_url</name>
                                                                  <description></description>
                                                                            <defaultValue>https://github.com/apache/cloudstack.git</defaultValue>
                                                                                    </hudson.model.StringParameterDefinition>
                                                                                            <hudson.model.StringParameterDefinition>
                                                                                                      <name>email_address</name>
                                                                                                                <description></description>
                                                                                                                          <defaultValue>bv.bharatk@gmail.com</defaultValue>
                                                                                                                                  </hudson.model.StringParameterDefinition>
                                                                                                                                          <hudson.model.StringParameterDefinition>
                                                                                                                                                    <name>configName</name>
                                                                                                                                                              <description></description>
                                                                                                                                                                        <defaultValue>Xen</defaultValue>
                                                                                                                                                                                </hudson.model.StringParameterDefinition>
                                                                                                                                                                                        <hudson.model.StringParameterDefinition>
                                                                                                                                                                                                  <name>profile</name>
                                                                                                                                                                                                            <description></description>
                                                                                                                                                                                                                      <defaultValue>CI</defaultValue>
                                                                                                                                                                                                                              </hudson.model.StringParameterDefinition>
                                                                                                                                                                                                                                      <hudson.model.StringParameterDefinition>
                                                                                                                                                                                                                                                <name>branch_list</name>
                                                                                                                                                                                                                                                          <description></description>
                                                                                                                                                                                                                                                                    <defaultValue>master</defaultValue>
                                                                                                                                                                                                                                                                            </hudson.model.StringParameterDefinition>
                                                                                                                                                                                                                                                                                    <hudson.model.StringParameterDefinition>
                                                                                                                                                                                                                                                                                              <name>pr_no</name>
                                                                                                                                                                                                                                                                                                        <description></description>
                                                                                                                                                                                                                                                                                                                  <defaultValue>None</defaultValue>
                                                                                                                                                                                                                                                                                                                          </hudson.model.StringParameterDefinition>
                                                                                                                                                                                                                                                                                                                                </parameterDefinitions>
                                                                                                                                                                                                                                                                                                                                    </hudson.model.ParametersDefinitionProperty>
                                                                                                                                                                                                                                                                                                                                        <com.sonyericsson.rebuild.RebuildSettings plugin="rebuild@1.21">
                                                                                                                                                                                                                                                                                                                                              <autoRebuild>false</autoRebuild>
                                                                                                                                                                                                                                                                                                                                                  </com.sonyericsson.rebuild.RebuildSettings>
                                                                                                                                                                                                                                                                                                                                                      <jenkins.plugins.slack.SlackNotifier_-SlackJobProperty plugin="slack@1.7">
                                                                                                                                                                                                                                                                                                                                                            <teamDomain></teamDomain>
                                                                                                                                                                                                                                                                                                                                                                  <token></token>
                                                                                                                                                                                                                                                                                                                                                                        <room></room>
                                                                                                                                                                                                                                                                                                                                                                              <startNotification>false</startNotification>
                                                                                                                                                                                                                                                                                                                                                                                    <notifySuccess>false</notifySuccess>
                                                                                                                                                                                                                                                                                                                                                                                          <notifyAborted>false</notifyAborted>
                                                                                                                                                                                                                                                                                                                                                                                                <notifyNotBuilt>false</notifyNotBuilt>
                                                                                                                                                                                                                                                                                                                                                                                                      <notifyUnstable>false</notifyUnstable>
                                                                                                                                                                                                                                                                                                                                                                                                            <notifyFailure>false</notifyFailure>
                                                                                                                                                                                                                                                                                                                                                                                                                  <notifyBackToNormal>false</notifyBackToNormal>
                                                                                                                                                                                                                                                                                                                                                                                                                        <notifyRepeatedFailure>false</notifyRepeatedFailure>
                                                                                                                                                                                                                                                                                                                                                                                                                              <includeTestSummary>false</includeTestSummary>
                                                                                                                                                                                                                                                                                                                                                                                                                                    <showCommitList>false</showCommitList>
                                                                                                                                                                                                                                                                                                                                                                                                                                        </jenkins.plugins.slack.SlackNotifier_-SlackJobProperty>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <hudson.plugins.throttleconcurrents.ThrottleJobProperty plugin="throttle-concurrents@1.8.2">
                                                                                                                                                                                                                                                                                                                                                                                                                                                  <maxConcurrentPerNode>1</maxConcurrentPerNode>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <maxConcurrentTotal>1</maxConcurrentTotal>
                                                                                                                                                                                                                                                                                                                                                                                                                                                              <throttleEnabled>true</throttleEnabled>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <throttleOption>project</throttleOption>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </hudson.plugins.throttleconcurrents.ThrottleJobProperty>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </properties>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <scm class="hudson.scm.NullSCM"/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <assignedNode>cobbler-hyd</assignedNode>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <canRoam>false</canRoam>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <disabled>false</disabled>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <triggers/>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <concurrentBuild>true</concurrentBuild>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <builders>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <hudson.tasks.Shell>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <command>branchArray=(${branch_list//,/ })
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      count=$(echo ${#branchArray[@]})

if [ ! -f nextCount${configName} ] 
then
   echo 0 &gt; nextCount${configName}
   fi

currentCount=$(cat nextCount${configName})
count=$((count-1))
buildBranch=${branchArray[$currentCount]}

if [ &quot;$currentCount&quot; -ge &quot;$count&quot; ]
then 
    currentCount=0
    else
        currentCount=$((currentCount+1))
        fi

echo $currentCount &gt; nextCount${configName}
branch=$buildBranch


python2.7 /root/cloud-autodeploy2/newcode/deploytestsProfile.py -u ${git_repo_url} -b ${branch} --buildFromPr ${pr_no} -c None ${commit_id} --mail-to ${email_address} --profile=${profile}  --cfgname=${configName} --tests test/integration/smoke-test/integration/smoke/misc-test_ssvm.py-test_nuage_vsp.py,test/integration/smoke/test_ssvm.py</command>
    </hudson.tasks.Shell>
      </builders>
        <publishers>
            <hudson.plugins.emailext.ExtendedEmailPublisher plugin="email-ext@2.24.1">
                  <recipientList>$DEFAULT_RECIPIENTS, ${ENV,var=&quot;email_address&quot;}</recipientList>
                        <configuredTriggers>
                                <hudson.plugins.emailext.plugins.trigger.UnstableTrigger>
                                          <email>
                                                      <recipientList></recipientList>
                                                                  <subject>$PROJECT_DEFAULT_SUBJECT</subject>
                                                                              <body>$PROJECT_DEFAULT_CONTENT</body>
                                                                                          <sendToDevelopers>true</sendToDevelopers>
                                                                                                      <sendToRequester>false</sendToRequester>
                                                                                                                  <includeCulprits>false</includeCulprits>
                                                                                                                              <sendToRecipientList>false</sendToRecipientList>
                                                                                                                                        </email>
                                                                                                                                                </hudson.plugins.emailext.plugins.trigger.UnstableTrigger>
                                                                                                                                                        <hudson.plugins.emailext.plugins.trigger.FailureTrigger>
                                                                                                                                                                  <email>
                                                                                                                                                                              <recipientList></recipientList>
                                                                                                                                                                                          <subject>$PROJECT_DEFAULT_SUBJECT</subject>
                                                                                                                                                                                                      <body>$PROJECT_DEFAULT_CONTENT</body>
                                                                                                                                                                                                                  <sendToDevelopers>true</sendToDevelopers>
                                                                                                                                                                                                                              <sendToRequester>false</sendToRequester>
                                                                                                                                                                                                                                          <includeCulprits>false</includeCulprits>
                                                                                                                                                                                                                                                      <sendToRecipientList>true</sendToRecipientList>
                                                                                                                                                                                                                                                                </email>
                                                                                                                                                                                                                                                                        </hudson.plugins.emailext.plugins.trigger.FailureTrigger>
                                                                                                                                                                                                                                                                                <hudson.plugins.emailext.plugins.trigger.SuccessTrigger>
                                                                                                                                                                                                                                                                                          <email>
                                                                                                                                                                                                                                                                                                      <recipientList></recipientList>
                                                                                                                                                                                                                                                                                                                  <subject>$PROJECT_DEFAULT_SUBJECT</subject>
                                                                                                                                                                                                                                                                                                                              <body>$PROJECT_DEFAULT_CONTENT</body>
                                                                                                                                                                                                                                                                                                                                          <sendToDevelopers>false</sendToDevelopers>
                                                                                                                                                                                                                                                                                                                                                      <sendToRequester>false</sendToRequester>
                                                                                                                                                                                                                                                                                                                                                                  <includeCulprits>false</includeCulprits>
                                                                                                                                                                                                                                                                                                                                                                              <sendToRecipientList>false</sendToRecipientList>
                                                                                                                                                                                                                                                                                                                                                                                        </email>
                                                                                                                                                                                                                                                                                                                                                                                                </hudson.plugins.emailext.plugins.trigger.SuccessTrigger>
                                                                                                                                                                                                                                                                                                                                                                                                      </configuredTriggers>
                                                                                                                                                                                                                                                                                                                                                                                                            <contentType>default</contentType>
                                                                                                                                                                                                                                                                                                                                                                                                                  <defaultSubject>Automation Test Results. Build Name=DeployAndTest. Build Number=${ENV,var=&quot;BUILD_NUMBER&quot;}</defaultSubject>
                                                                                                                                                                                                                                                                                                                                                                                                                        <defaultContent>$DEFAULT_CONTENT</defaultContent>
                                                                                                                                                                                                                                                                                                                                                                                                                              <attachmentsPattern></attachmentsPattern>
                                                                                                                                                                                                                                                                                                                                                                                                                                    <presendScript></presendScript>
                                                                                                                                                                                                                                                                                                                                                                                                                                        </hudson.plugins.emailext.ExtendedEmailPublisher>
                                                                                                                                                                                                                                                                                                                                                                                                                                          </publishers>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <buildWrappers/>
                                                                                                                                                                                                                                                                                                                                                                                                                                            </project>
